<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reading Espresso</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="font-primary">
    <!-- Custom Page -->
    <div id="customScreen" class="d-flex flex-column d-none">
      <!-- Progress Bar -->
      <div
        class="d-flex justify-content-center align-items-center border-bottom px-lg-4 position-relative"
        style="height: 70px"
      >
        <div
          id="progressBar"
          class="border-bottom border-4 border-primary h-100 d-flex align-items-center position-absolute start-0"
          style="width: 10%"
        ></div>

        <div id="pagination" class="align-self-center display-7 fw-semibold">
          1 of 3
        </div>

        <!-- <div class="px-4">
      <img src="img/icon_exit.svg" alt="" />
    </div> -->
        <button id="exitBttn" class="btn position-absolute end-0">
          <img src="img/icon_exit.svg" alt="" />
        </button>
      </div>

      <!-- Content -->
      <div class="container">
        <!-- Onboarding-->
        <div
          id="page1"
          class="d-none d-flex flex-column align-items-center px-4 px-lg-5 m-1 m-lg-5"
        >
          <p class="display-4 fw-bold my-5 py-3">How it works</p>

          <div class="row">
            <div class="col-md-4 mb-5">
              <div class="d-flex flex-column align-items-center">
                <img
                  class="mb-2 mb-md-4"
                  src="img/step_read.svg"
                  style="width: 60%"
                  alt=""
                />

                <div class="row">
                  <div class="col-2">
                    <div
                      class="d-flex justify-content-center align-items-center rounded-circle bg-primary text-white fw-bold"
                      style="height: 2rem; aspect-ratio: 1 / 1"
                    >
                      1
                    </div>
                  </div>
                  <div class="col-10">
                    <div class="lead fw-bold">Personalize.</div>
                    <div class="lead">
                      Answer a few questions to tailor your read!
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-4 mb-5">
              <div class="d-flex flex-column align-items-center">
                <img
                  class="mb-2 mb-md-4"
                  src="img/step_read.svg"
                  style="width: 60%"
                  alt=""
                />

                <div class="row">
                  <div class="col-2">
                    <div
                      class="d-flex justify-content-center align-items-center rounded-circle bg-primary text-white fw-bold"
                      style="height: 2rem; aspect-ratio: 1 / 1"
                    >
                      2
                    </div>
                  </div>
                  <div class="col-10">
                    <div class="lead fw-bold">Print.</div>
                    <div class="lead">
                      Wait for a moment for your personalized read to be created
                      and printed!
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-4 mb-5">
              <div class="d-flex flex-column align-items-center">
                <img
                  class="mb-2 mb-md-4"
                  src="img/step_read.svg"
                  style="width: 60%"
                  alt=""
                />

                <div class="row">
                  <div class="col-2">
                    <div
                      class="d-flex justify-content-center align-items-center rounded-circle bg-primary text-white fw-bold"
                      style="height: 2rem; aspect-ratio: 1 / 1"
                    >
                      3
                    </div>
                  </div>
                  <div class="col-10">
                    <div class="lead fw-bold">Read.</div>
                    <div class="lead">
                      Enjoy your personalized read on the move!
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Age Group-->

        <div
          id="page2"
          class="d-none d-flex flex-column align-items-center px-4 px-lg-5 m-lg-5"
        >
          <p class="display-4 fw-bold my-5 py-3">Whatâ€™s your age group?</p>

          <div class="d-flex flex-column mb-5">
            <div
              class="btn-group d-flex flex-column"
              role="group"
              aria-label="Basic radio toggle button group"
            >
              <div class="mb-2">
                <input
                  type="radio"
                  class="btn-check"
                  name="btnradio"
                  id="btnradio1"
                  autocomplete="off"
                  checked
                />
                <label
                  class="btn btn-outline-primary rounded-pill text-start px-4"
                  style="width: 100%"
                  for="btnradio1"
                  >0-5 (Early Childhood)</label
                >
              </div>

              <div class="mb-2">
                <input
                  type="radio"
                  class="btn-check"
                  name="btnradio"
                  id="btnradio2"
                  autocomplete="off"
                />
                <label
                  class="btn btn-outline-primary rounded-pill text-start px-4"
                  style="width: 100%"
                  for="btnradio2"
                >
                  6-10 (Middle Childhood)</label
                >
              </div>

              <div class="mb-2">
                <input
                  type="radio"
                  class="btn-check"
                  name="btnradio"
                  id="btnradio3"
                  autocomplete="off"
                />
                <label
                  class="btn btn-outline-primary rounded-pill text-start px-4"
                  style="width: 100%"
                  for="btnradio3"
                  >11-15 (Pre-Teen and Early Teen)</label
                >
              </div>

              <div class="mb-2">
                <input
                  type="radio"
                  class="btn-check"
                  name="btnradio"
                  id="btnradio4"
                  autocomplete="off"
                />
                <label
                  class="btn btn-outline-primary rounded-pill text-start px-4"
                  style="width: 100%"
                  for="btnradio4"
                  >16-22 (Late Teen and Young Adult)</label
                >
              </div>

              <div class="mb-2">
                <input
                  type="radio"
                  class="btn-check"
                  name="btnradio"
                  id="btnradio5"
                  autocomplete="off"
                />
                <label
                  class="btn btn-outline-primary rounded-pill text-start px-4"
                  style="width: 100%"
                  for="btnradio5"
                  >> 23 (Adult)</label
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Puzzle -->
        <div
          id="page4"
          class="d-none d-flex flex-column align-items-center px-4 px-lg-5 m-lg-5"
        >
          <p class="display-4 fw-bold my-5 py-3">Do you want a puzzle?</p>

          <form id="checkbox-puzzle">
            <div class="d-flex flex-wrap justify-content-center">
              <div class="d-flex flex-column align-items-center m-5">
                <img
                  class="mb-4"
                  style="width: 80%"
                  src="img/icon_puzzle_chess.svg"
                  alt=""
                />
                <input
                  class="checkbox-input"
                  type="checkbox"
                  value="Chess"
                  id="option1"
                />
                <label
                  class="checkbox-label border border-primary"
                  for="option1"
                >
                  Chess
                </label>
              </div>
              <div class="d-flex flex-column align-items-center m-5">
                <img
                  class="mb-4"
                  style="width: 80%"
                  src="img/icon_puzzle_crossword.svg"
                  alt=""
                />
                <input
                  class="checkbox-input"
                  type="checkbox"
                  value="Crossword"
                  id="option2"
                />
                <label
                  class="checkbox-label border border-primary"
                  for="option2"
                >
                  Crossword
                </label>
              </div>
              <div class="d-flex flex-column align-items-center m-5">
                <img
                  class="mb-4"
                  style="width: 80%"
                  src="img/icon_puzzle_sudoku.svg"
                  alt=""
                />
                <input
                  class="checkbox-input"
                  type="checkbox"
                  value="Sudoku"
                  id="option3"
                />
                <label
                  class="checkbox-label border border-primary"
                  for="option3"
                >
                  Sudoku
                </label>
              </div>
              <!-- Add more checkboxes as needed -->
            </div>
          </form>
        </div>

        <!-- Themes & Genre -->
        <div
          id="page3"
          class="d-none d-flex flex-column align-items-center px-4 px-lg-5 m-lg-5"
        >
          <p class="display-4 fw-bold my-5 py-3">
            What are you in the mood for?
          </p>

          <!-- Categories Groups -->
          <div
            id="categoriesContainer"
            class="tab-group d-flex flex-wrap align-items-end h4 mb-5"
            role="group"
            aria-label="Radio toggle tab group"
          >
            <!-- <div>
              <input
                type="radio"
                class="tab-check"
                name="tab-genre"
                id="tab-genre1"
                autocomplete="off"
                checked
              />
              <label
                class="tab tab-horizontal text-end px-4 py-2"
                style="width: 100%"
                for="tab-genre1"
                >Fiction</label
              >
            </div>

            <div>
              <input
                type="radio"
                class="tab-check"
                name="tab-genre"
                id="tab-genre2"
                autocomplete="off"
              />
              <label
                class="tab tab-horizontal text-end px-4 py-2"
                style="width: 100%"
                for="tab-genre2"
                >Non-fiction</label
              >
            </div>

            <div>
              <input
                type="radio"
                class="tab-check"
                name="tab-genre"
                id="tab-genre3"
                autocomplete="off"
              />
              <label
                class="tab tab-horizontal text-end px-4 py-2"
                style="width: 100%"
                for="tab-genre3"
                >Staff Picks</label
              >
            </div> -->
          </div>

          <div class="d-flex">
            <!-- Subcategories -->
            <div
              id="subcategoriesContainer"
              class="tab-group d-flex flex-column h6 mb-5"
              role="group"
              aria-label="radio toggle tab group"
            >
              <div>
                <input
                  type="radio"
                  class="tab-check"
                  name="tab-genre1"
                  id="tab-genre1-1"
                  autocomplete="off"
                  checked
                />
                <label
                  class="tab text-end px-4 py-2"
                  style="width: 100%"
                  for="tab-genre1-1"
                  >Classics</label
                >
              </div>

              <div>
                <input
                  type="radio"
                  class="tab-check"
                  name="tab-genre1"
                  id="tab-genre1-2"
                  autocomplete="off"
                />
                <label
                  class="tab text-end px-4 py-2"
                  style="width: 100%"
                  for="tab-genre1-2"
                >
                  Fantasy</label
                >
              </div>

              <div>
                <input
                  type="radio"
                  class="tab-check"
                  name="tab-genre1"
                  id="tab-genre1-3"
                  autocomplete="off"
                />
                <label
                  class="tab text-end px-4 py-2"
                  style="width: 100%"
                  for="tab-genre1-3"
                  >Science Fiction</label
                >
              </div>

              <div>
                <input
                  type="radio"
                  class="tab-check"
                  name="tab-genre1"
                  id="tab-genre1-4"
                  autocomplete="off"
                />
                <label
                  class="tab text-end px-4 py-2"
                  style="width: 100%"
                  for="tab-genre1-4"
                  >Mystery</label
                >
              </div>
            </div>

            <!-- Tags -->
            <form id="checkbox-tags">
              <div class="d-flex flex-wrap mx-1 mx-lg-5">
                <div class="m-2">
                  <input
                    class="checkbox-input"
                    type="checkbox"
                    value="Chess"
                    id="tag1"
                  />
                  <label
                    class="checkbox-label border border-primary"
                    for="tag1"
                  >
                    Victorian
                  </label>
                </div>

                <div class="m-2">
                  <input
                    class="checkbox-input"
                    type="checkbox"
                    value="Chess"
                    id="tag2"
                  />
                  <label
                    class="checkbox-label border border-primary"
                    for="tag2"
                  >
                    Elizabethan
                  </label>
                </div>

                <div class="m-2">
                  <input
                    class="checkbox-input"
                    type="checkbox"
                    value="Chess"
                    id="tag3"
                  />
                  <label
                    class="checkbox-label border border-primary"
                    for="tag3"
                  >
                    Romanticism
                  </label>
                </div>

                <!-- Add more checkboxes as needed -->
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Nav Bar -->
      <div
        class="d-flex justify-content-center up-shadow fixed-bottom bg-white"
        style="height: 80px"
      >
        <button
          id="backBttn"
          class="btn btn-outline-dark m-3 fw-semibold fs-5 rounded-0 d-flex justify-content-center align-items-center"
          style="width: 20%"
        >
          <img
            class="me-1 me-lg-4"
            src="img/arrow_left.svg"
            style="height: 50%"
          />
          BACK
        </button>
        <button
          id="nextBttn"
          class="btn btn-primary m-3 fw-semibold fs-5 rounded-0 d-flex justify-content-center align-items-center"
          style="width: 20%"
        >
          NEXT
          <img
            class="ms-1 ms-lg-4"
            src="img/arrow_right.svg"
            style="height: 50%"
          />
        </button>
      </div>
    </div>

    <!-- Attract Screen -->
    <div id="page0" class="container">
      <div
        class="d-flex flex-column justify-content-center px-2 px-lg-5"
        style="height: 100vh"
      >
        <div class="row g-5 align-items-center">
          <div class="col-md-6 pe-lg-5">
            <img src="img/img_read.svg" style="width: 100%" alt="" />
          </div>

          <div class="col-md-6 ps-lg-5">
            <h1 class="display-1 fw-bold mb-3">Reading Espresso</h1>
            <p class="lead fw-normal mb-4 pb-lg-4">
              Grab your daily shot of literary espresso, and savor personalized
              reading on the move.
            </p>

            <a
              href="custom.html"
              class="btn btn-primary btn-lg rounded-pill d-inline-block py-2 px-4"
              role="button"
              id="startBttn"
            >
              Start
              <img
                src="img/arrow_right.svg"
                style="height: 15px; padding-bottom: 3px"
              />
            </a>
          </div>
        </div>
      </div>
    </div>

    <!--jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"
    ></script>
    <script>
      let pageNum = 0;
      let selectedCategory;
      let selectedSubcategory;

      let content_tags = {
        Fiction: {
          Classics: ["Victorian", "Elizabethan", "Romanticism"],
          Fantasy: ["Epic Fantasy", "Urban Fantasy", "Dark Fantasy"],
          "Science Fiction": ["Space Opera", "Cyberpunk", "Dystopian"],
          Mystery: ["Crime", "Detective", "Thriller"],
        },
        "Non-Fiction": {
          Biographies: ["Historical Figures", "Celebrities", "Scientists"],
          "Self-Help": [
            "Personal Development",
            "Health & Wellness",
            "Productivity",
          ],
          History: ["Ancient History", "Modern History", "World Wars"],
          "Science & Technology": [
            "Artificial Intelligence",
            "Space Exploration",
            "Medicine",
          ],
        },
        "Staff Picks": {
          "Must-Reads": [
            "Award Winners",
            "Critically Acclaimed",
            "Bestsellers",
          ],
          Contemporary: ["Modern Classics", "New Releases", "Popular Authors"],
          "World Literature": [
            "African Literature",
            "Asian Literature",
            "European Literature",
          ],
          "Cultural & Social": [
            "Social Justice",
            "Memoirs",
            "Cultural Studies",
          ],
        },
      };

      // Start Btn
      $(document).ready(function () {
        $("#startBttn").click(function (event) {
          event.preventDefault(); // Prevent default link behavior
          UpdatePage("Next");
        });

        $("#backBttn").click(function () {
          UpdatePage("Back");
        });

        $("#nextBttn").click(function () {
          UpdatePage("Next");
        });

        $("#exitBttn").click(() => {
          location.reload(true);
        });

        generateCategories(content_tags);

        $("#categoriesContainer").on("change", ".tab-check", function () {
          handleCategoryChange(this);
        });

        $("#subcategoriesContainer").on("change", ".tab-check", function () {
          handleSubategoryChange(this);
        });

        // Manually trigger the event for the default checked radio button
        $("#categoriesContainer .tab-check:checked").each(function () {
          handleCategoryChange(this);
        });
      });

      function handleCategoryChange(radioElement) {
        selectedCategory = $(radioElement).next("label").text();
        console.log("Selected Category:", selectedCategory);
        // Additional logic for the selected category
        updateSubcategories();
      }

      function UpdatePage(navDir) {
        $("#page" + pageNum).addClass("d-none");

        if (navDir === "Next") {
          pageNum++;
        } else if (navDir === "Back") {
          pageNum--;
        }
        if (pageNum === 1) {
          $("#customScreen").removeClass("d-none");
        } else if (pageNum === 0) {
          $("#customScreen").addClass("d-none");
        } else if (pageNum === 5) {
          window.location.href = "receipt.html";
        }

        $("#page" + pageNum).removeClass("d-none");

        $("#pagination").text(pageNum + " of 4");

        $("#progressBar").css("width", (pageNum / 4) * 100 + "%");
      }

      $("#checkbox-puzzle").on("change", ".checkbox-input", () => {
        let checkedOptions = $("#checkbox-puzzle .checkbox-input:checked")
          .map((_, el) => el.value)
          .get();
        console.log("Checked Options:", checkedOptions);
      });

      $("#checkbox-tags").on("change", ".checkbox-input", () => {
        let checkedOptions = $("#checkbox-tags .checkbox-input:checked")
          .map((_, el) => el.value)
          .get();
        console.log("Checked Options:", checkedOptions);
      });

      function generateCategories(content_tags) {
        let $container = $("#categoriesContainer");
        let categoryIndex = 1;

        $.each(content_tags, function (category) {
          let $div = $("<div></div>");

          let $input = $("<input>", {
            type: "radio",
            class: "tab-check",
            name: "tab-genre",
            id: "tab-genre" + categoryIndex,
            autocomplete: "off",
          });
          if (categoryIndex === 1) $input.prop("checked", true);

          let $label = $("<label>", {
            class: "tab tab-horizontal text-end px-4 py-2",
            style: "width: 100%",
            for: "tab-genre" + categoryIndex,
            text: category,
          });

          $div.append($input).append($label);
          $container.append($div);

          categoryIndex++;
        });
      }

      function updateSubcategories() {
        let $container = $("#subcategoriesContainer");
        $container.empty(); // Clear existing content

        $.each(content_tags[selectedCategory], function (subCategory, items) {
          // key, value

          let $div = $("<div></div>");
          let $input = $("<input>", {
            type: "radio",
            class: "tab-check",
            name: "tab-" + selectedCategory.toLowerCase().replace(/\s+/g, ""),
            id:
              "tab-" +
              selectedCategory.toLowerCase().replace(/\s+/g, "") +
              "-" +
              subCategory,
            autocomplete: "off",
          });
          let $label = $("<label>", {
            class: "tab text-end px-4 py-2",
            style: "width: 100%",
            for:
              "tab-" +
              selectedCategory.toLowerCase().replace(/\s+/g, "") +
              "-" +
              subCategory,
            text: subCategory,
          });

          $div.append($input).append($label);
          $container.append($div);
        });
      }

      function handleSubategoryChange(radioElement) {
        selectedSubcategory = $(radioElement).next("label").text();
        console.log("Selected Subategory:", selectedSubcategory);
        updateTags();
      }

      function updateTags() {}
    </script>
  </body>
</html>
